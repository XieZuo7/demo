<!DOCTYPE html>
<html>
  <head>
    <!-- Origin Trial Token, feature = WebUSB (For Chrome M57+), origin = https://webusb.github.io, expires = 2017-06-19 -->
    <meta http-equiv="origin-trial" data-feature="WebUSB (For Chrome M57+)" data-expires="2017-06-19" content="Ag83MurQOa5N4SKRCqqtSlbycfe08s5LgUiqEI7J3jTk2NEIpRp7SLPz2i+EBDuXyf+AeRMdD6BI++kTSJmGzQEAAABReyJvcmlnaW4iOiJodHRwczovL3dlYnVzYi5naXRodWIuaW86NDQzIiwiZmVhdHVyZSI6IldlYlVTQjIiLCJleHBpcnkiOjE0OTc4OTM2OTV9">
    <title>Cycling Tracking System</title>
    <script src="../serial.js"></script>
    <script src="Cycling Tracking System.js"></script>
  </head>
  <body>
    <p>
	<center><button id="connect">Connect</button> <span id="status"></span></center>
    </p>
	<font size=6"" color=#00FF00""><center>记录你的每一天</center></font>
	  
	<div style="position: absolute; top: 80px;left: 400px;border: 2px solid blue;width: 200px;height: 80px;border-radius: 10px;margin-top: 30px">
	<div style="position: absolute; top: 30px;left: 85px;background-color: white;"><span id="valueL">40</span></div>
	<div style="position: absolute; top: -15px;left: 10px;background-color: white;">左侧受力</div></div>
	<div style="position: absolute; top: 80px;right: 400px;border: 2px solid blue;width: 200px;height: 80px;border-radius: 10px;margin-top: 30px">
	<div style="position: absolute; top: 30px;left: 85px;background-color: white;"><span id="valueR">30</span></div>
	<div style="position: absolute; top: -15px;left: 10px;background-color: white;">右侧受力</div></div>
		
		<span id="valueDay">30</span>
	  <span id="value8"></span>
	  <span id="value9"></span>
	  <span id="value10"></span>
	  
	<canvas id="mc" width="900" height="450" style="position: absolute; top: 200px;right: 300px;border:1px solid black;border-radius:30px;"></canvas>
	<script type="text/javascript">
function change() {
	//document.getElementById('value9').innerHTML = document.getElementById('range9').value;
	
  	 
  	//document.getElementById('value10').innerHTML = document.getElementById('range10').value;
	}
		var canvas=document.getElementById('mc');
		var ctx=canvas.getContext('2d');
		

function init(){
       draw();
}
init();

function draw(){
		ctx.clearRect(0, 0, 900, 450); 
		
		ctx.beginPath();
		
		ctx.moveTo(50,20);
		ctx.lineTo(50,380);
		ctx.lineTo(880,380);
		
		ctx.strokeStyle="#555";
		for(var i=0;i<7;i++)
		{
			ctx.moveTo(50,30+50*i);
			ctx.lineTo(880,30+50*i);
			ctx.strokeText('70'-10*i,20,32+50*i);
		}
		
		for(var i=0;i<10;i++)
		{
			ctx.strokeText('第'+'1'*(i+1)+'天',80+80*i,435);
		}
		var ii=0;
		if(document.getElementById('valueL').innerHTML > 1000 & ii < 500)
			{
    	   	     
      		      if(document.getElementById('valueDay').innerHTML == 8)
		      		{
					document.getElementById("value8").innerHTML++;ii = 1111;
      	  	   		 }else if(document.getElementById('valueDay').innerHTML == 9)
				 	{
					document.getElementById("value9").innerHTML++;ii = 1111;
        	   			 }else{
						 document.getElementById("value10").innerHTML++;ii = 1111;
					 	}}
			else if(document.getElementById('valueL').innerHTML < 1000 & ii > 0){ii = 0;}
			


       		
		//折线
		ctx.moveTo(80,180);
		ctx.lineTo(160,180);
		ctx.lineTo(240,200);
		ctx.lineTo(320,130);
		ctx.lineTo(400,180);
		ctx.lineTo(480,170);
		ctx.lineTo(560,120);
		ctx.lineTo(640,'380'-5*document.getElementById('value8').innerHTML);
		ctx.lineTo(720,'380'-5*document.getElementById('value9').innerHTML);
		ctx.lineTo(800,'380'-5*document.getElementById('value10').innerHTML);
		ctx.stroke();
requestAnimationFrame(draw);
}


	</script>


  </body>
</html>
